<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/x-icon" href="photo/favicon1.ico">
    <title>Buy Pixel Grid - Pixel Memory</title>
    <script>
        // Render 会在部署时自动将 "{{ BACKEND_URL }}" 替换为实际的环境变量值
        // 所以在生产环境中，这行会变成：window.BACKEND_URL = "https://pixelwebbackend.onrender.com";
        window.BACKEND_URL = "{{ BACKEND_URL }}"; 
    </script>
</head>
<body>
    <header class="site-header">
        <a href="index.html"><img src="photo/Pixel_Memory_Logo_without_backgroud.png" alt="Pixel Memory Logo" class="logo"></a>
        <div class="center-content">
          <h1>Pixel</h1>
          <nav>
            <ul>
              <li><a href="index.html">Home Page</a></li>
              <li><a href="Pixel.html">Buy Pixel</a></li>
              <li><a href="leaderboard.html">Leaderboard</a></li>
              <li><a href="FAQ.html">FAQ</a></li>
              <li><a href="Contact.html">Contact Us</a></li>
            </ul> 
          </nav>
        </div>
        <div class="right-content">
            <ul>
              <li>limited 14,000pixel</li>
              <li>$1 per pixel</li>
            </ul>
          </div>
    </header>

    <div class="main-content-pixel">
        <div class="grid-container-pixel">
            <div class="grid-pixel" id="pixelGrid"></div>
        </div>

        <div class="upload-panel-pixel">
            <h2>Buy Pixel Grid</h2>
            <div class="selection-info">
                <p>Selected: <span id="selectedCount" class="count">0</span> pixels</p>
                <p>Unit Price: <span class="count">$1</span> / pixel</p>
            </div>
            <div class="price-display">
                Total Price: $<span id="totalPrice">0</span>
            </div>

            <div class="form-group-pixel">
                <label>Upload Image</label>
                <input type="file" id="imageUpload" accept="image/*" onchange="previewImage(event)">
                <div class="guidance-text_pixel">
                <small class="guidance-text">
                    <ul>
                    <li>To achieve the best display effect in your purchased pixel area, and to avoid cropping or unwanted blank space, we strongly recommend uploading an image with the <strong>same aspect ratio as the selected area</strong>.</li>
                    <br>
                    <li>You selected an area of <strong>2 × 3 pixels</strong>. Since each pixel is <strong>10px × 10px</strong>, the image should be <strong>20px × 30px</strong> in size (aspect ratio <strong>2:3</strong>).</li>
                    <br>
                    <li><strong>Tip:</strong> If the image ratio does not match, the system will try to display your image as fully as possible but may leave blank space around it.You can also use the ChatGPT or any tools to resize your image.</li>
                    </ul>
                </small>
                </div>
                <img id="preview" class="preview-image" style="display: none;">
            </div>

            <div class="form-group-pixel">
                <label>Link URL</label>
                <input type="url" id="linkInput" placeholder="https://example.com">
                <div class="guidance-text_pixel">
                <small class="guidance-text">
                    <ul>
                    <li>To get the best display effect in your purchased pixel area, please provide a complete webpage link.</li>
                    </ul>
                </small>
                </div>
            </div>
            
            <div class="form-group-pixel">
                <label for="titleInput">Title:</label>
                <input type="text" id="titleInput" name="title" placeholder="Enter your title" />
            </div>

            <button class="buy-btn" onclick="purchase()">Confirm Purchase and Upload</button>
            <p id="errorMessage" class="error-message"></p>
        </div>
    </div>
    <footer>
        <i>
            <p>&copy; 2025 PixelMemory. All rights reserved.
                I am not responsible for the content of external sites. 
                Images featured on homepage are © of their respective owners.</p>
        </i>
    </footer>
    <script src="https://js.stripe.com/v3/"></script>
    <script src="javascript/pixel.js"></script>
</body>
</html>
